 /*
* 2007-2017 PrestaShop
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
*  @author PrestaShop SA <contact@prestashop.com>
*  @copyright  2007-2019 PrestaShop SA
*  @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*  International Registered Trademark & Property of PrestaShop SA
*/
tinymce.PluginManager.add('powr', function(editor, url) {
    function uniqueLabel(){
        return 'xxxxxxxx_'.replace(/[x]/g, function(c) {
            var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
            return v.toString(16);
        }) + new Date().getTime();
    }
    editor.addButton('powr', {
        title : 'POWr Plugin',
        tooltip: 'Insert POWr Plugin',
        //image : 'powr-icon.png',
        icon: 'icon powr-icon',
        type: 'menubutton',
        onclick : function(e) {
      var app_name = e.target.innerText.replace("format_color_text",'').trim().replace(/^\s+|\s+$/g, '');
      var app_shortcode = app_name.toLowerCase().replace(/ /g, '-');
      if( app_shortcode && !e.target.classList.contains('mce-menu-item-expand') && !e.target.parentElement.classList.contains('mce-menu-item-expand')){
        var unique_label = uniqueLabel();
        if(app_shortcode == 'rss-feed' ){
          unique_label = 'prestashop_rss-feed_'+unique_label;
        }
        var c = '[powr-'+app_shortcode+' id='+unique_label+']'; //For just shortcode
        //Set the content in the editor
        editor.selection.setContent(c);
      }
        },
        menu: [
            {
              text: 'Popular',
              menu: [
                  {text: 'Form Builder'},
                  {text: 'Social Feed'},
                  {text: 'Countdown Timer'},
                  {text: 'Media Gallery'},
                  {text: 'Popup'},
                  {text: 'PayPal Button'},
                  {text: 'Multi Slider'},
                  {text: 'FAQ'},
                  {text: 'Chat'},
                  {text: 'Comments'}
              ]
            },
            {
                text: 'Forms & Surveys',
                menu: [
                    {text: 'Contact Form'},
                    {text: 'Form Builder'},
                    {text: 'Mailing List'},
                    {text: 'Order Form'},
                    {text: 'Poll'},
                    {text: 'Survey'}
                ]
            },
            {
                text: 'Galleries & Sliders',
                menu: [
                    {text: 'Banner Slider'},
                    {text: 'Event Gallery'},
                    {text: 'Event Slider'},
                    {text: 'Flickr Gallery'},
                    {text: 'Image Slider'},
                    {text: 'Media Gallery'},
                    {text: 'Microblog'},
                    {text: 'Multi Slider'},
                    {text: 'Photo Gallery'},
                    {text: 'Video Gallery'},
                    {text: 'Video Slider'},
                    {text: 'Vimeo Gallery'},
                    {text: 'Youtube Gallery'}
              ]
            },
            {
                text: 'Social',
                menu: [
                    {text: 'Chat'},
                    {text: 'Comments'},
                    {text: 'Facebook Feed'},
                    {text: 'Instagram Feed'},
                    {text: 'Pinterest Feed'},
                    {text: 'Reviews'},
                    {text: 'RSS Feed'},
                    {text: 'Social Feed'},
                    {text: 'Social Media Icons'},
                    {text: 'Tumblr Feed'},
                    {text: 'Twitter Feed'}
                ]

            },
            {
                text: 'eCommerce',
                menu: [
                    {text: 'Ecommerce'},
                    {text: 'Digital Download'},
                    {text: 'Paypal Button'},
                    {text: 'Plan Comparison'},
                    {text: 'Price Table'}
                ]
            },
            {
                text: 'Miscellaneous',
                menu: [
                    {text: 'About Us'},
                    {text: 'Button'},
                    {text: 'Booking'},
                    {text: 'Countdown Timer'},
                    {text: 'Count Up Timer'},
                    {text: 'FAQ'},
                    {text: 'Graph'},
                    {text: 'Hit Counter'},
                    {text: 'Holiday Countdown'},
                    {text: 'Job Board'},
                    {text: 'Map'},
                    {text: 'Menu'},
                    {text: 'Music Player'},
                    {text: 'Notification Bar'},
                    {text: 'Popup'},
                    {text: 'Resume'},
                    {text: 'Scroll To Top'},
                    {text: 'Tabs'},
                    {text: 'Weather'}
                  ]
            }
        ]
    });
});
